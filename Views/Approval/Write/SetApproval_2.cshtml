@{
    Layout = "_PopupLayout";
}

<!-- 직원 이름 검색 -->
<div class="search-area">
    <div class="label">사용자명</div>
    <div class="keyword-area">
        <input type="text" id="searchKeyword" class="keyword" name="keyword" />
    </div>
    <div class="btn-area">
        <button class="btn-base btn-search">검색</button>
        <button class="btn-base btn-cancel">취소</button>
    </div>
</div>

<div class="dept-area">
    <!-- 부서 리스트 -->
    <div class="dept-list">
        <ul id="EmployeeList" class="ztree"></ul>
    </div>
    <!-- 직원 리스트 -->
    <div class="employee-list">
        <table class="employees table-list__employees">
            <thead>
                <tr>
                    <td class="emp-tbl__header">#</td>
                    <td class="emp-tbl__header"><input type="checkbox" id="" class="" name="" /></td>
                    <td class="emp-tbl__header">이름</td>
                    <td class="emp-tbl__header">직급</td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="emp-tbl__body">1</td>
                    <td class="emp-tbl__body"><input type="checkbox" id="" class="" name="" /></td>
                    <td class="emp-tbl__body">최경원</td>
                    <td class="emp-tbl__body">사원</td>
                </tr>
                <tr>
                    <td class="emp-tbl__body">1</td>
                    <td class="emp-tbl__body"><input type="checkbox" id="" class="" name="" /></td>
                    <td class="emp-tbl__body">Kristensen Williams Crawshaw</td>
                    <td class="emp-tbl__body">사원</td>
                </tr>
                <tr>
                    <td class="emp-tbl__body">1</td>
                    <td class="emp-tbl__body"><input type="checkbox" id= "" class="" name="" /></td>
                    <td class="emp-tbl__body">Jason Myers</td>
                    <td class="emp-tbl__body">사원</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
    
<div class="btn-area">
    <button class="btn-base">결재자추가</button>
    <button class="btn-base">참조자추가</button>
    <button class="btn-base">합의자추가</button>
</div>

<div class="select-list-area">
    <table class="select-list">
        <tr>
            <td class="confirm-list"></td>
            <td class="refer-list"></td>
            <td class="agree-list"></td>
        </tr>
    </table>
</div>

<script>
    $(document).ready(function(){
        // GetDepartment();
    var zTreeObj;
    var zNodes = [];
    var setting = {
        check: {
            enable: false, 
        },
        data: {
            idKey: 'id',
            pIdKey: 'pId',
            isParent: 'isParent'
        }
    };
    
    $.ajax({
        url : '/Approval/GetDepartment',
        dataType : 'json',
        success : function(data){
            
            for(var i = 0; i <= data.length - 1; i++){
                    zNodes[i] = {
                    id : data[i].code,
                    name : data[i].name,
                    isParent : true
                }
            }
            zTreeObj = $.fn.zTree.init($('#EmployeeList'), setting, zNodes);
        },
        error : function(){
            alert("Error");
        }
    });

        $('.dept-list').on('click', function(){
            alert(zTreeObj.getSelectedNodes()[0].id +', '+ zTreeObj.getSelectedNodes()[0].name);
        });
    });
</script>